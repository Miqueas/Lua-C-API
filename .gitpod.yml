image: gitpod/workspace-base

tasks:
  - name: Setup workspace
    init: |
      sudo apt update
      sudo apt upgrade -yq
      sudo apt install -yq ccls python3-pip liblua5.1-0-dev lua5.1
      sudo pip3 install -Uq meson ninja
    command: |
      meson _B
      ninja -C _B
      meson test -C _B

vscode:
  extensions:
    - asabil.meson
    - ccls-project.ccls